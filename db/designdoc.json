{
  "docs": [
    {
      "_id": "_design/accountsCreated",
      "language": "javascript",
      "validate_doc_update": "function(newDoc, oldDoc, userCtx, secObj) {\n    if (userCtx && userCtx.roles && (userCtx.roles.indexOf('_admin') !== -1 ||\n        userCtx.roles.indexOf('write') !== -1)) {\n        return;\n    } else {\n        throw ({\n            forbidden: 'You do not have write access to this database'\n        });\n    }\n}",
      "views": {
        "v1": {
          "map": "function( doc ) {\n\n  var time = new Date( doc.close_time_timestamp ),\n    timestamp = [ time.getUTCFullYear( ), time.getUTCMonth( ), time.getUTCDate( ),\n      time.getUTCHours( ), time.getUTCMinutes( ), time.getUTCSeconds( )\n    ];\n\n  doc.transactions.forEach( function( tx ) {\n\n    if ( tx.metaData.TransactionResult !== \"tesSUCCESS\" ) {\n      return;\n    }\n\n      tx.metaData.AffectedNodes.forEach( function( affNode ) {\n\n        if ( affNode.CreatedNode && affNode.CreatedNode.LedgerEntryType === \"AccountRoot\" ) {\n\n          emit( timestamp, affNode.CreatedNode.NewFields.Account );\n          \n        }\n\n      } );\n  } );\n}",
          "reduce": "_count"
        }
      }
    },
    {
      "_id": "_design/balanceChangesByAccount",
      "language": "javascript",
      "validate_doc_update": "function(newDoc, oldDoc, userCtx, secObj) {\n    if (userCtx && userCtx.roles && (userCtx.roles.indexOf('_admin') !== -1 ||\n        userCtx.roles.indexOf('write') !== -1)) {\n        return;\n    } else {\n        throw ({\n            forbidden: 'You do not have write access to this database'\n        });\n    }\n}",
      "views": {
        "v1": {
          "map": "function( doc ) {\n\n  var time = new Date( doc.close_time_timestamp ),\n    timestamp = [ time.getUTCFullYear( ), time.getUTCMonth( ), time.getUTCDate( ),\n      time.getUTCHours( ), time.getUTCMinutes( ), time.getUTCSeconds( )\n    ];\n\n  doc.transactions.forEach( function( tx ) {\n\n    if ( tx.metaData.TransactionResult !== \"tesSUCCESS\" )\n      return;\n\n    tx.metaData.AffectedNodes.forEach( function( affNode ) {\n\n      var node = affNode.CreatedNode || affNode.ModifiedNode || affNode.DeletedNode;\n\n      if ( !node || node.LedgerEntryType !== \"RippleState\" ) {\n        return;\n      }\n\n      var currency,\n        highParty,\n        lowParty,\n        prevBal,\n        finalBal,\n        balChange;\n\n      if ( node.NewFields ) {\n\n        // trustline created with non-negative balance\n\n        if ( parseFloat( node.NewFields.Balance.value ) === 0 ) {\n          return;\n        }\n\n        currency = node.NewFields.Balance.currency;\n        highParty = node.NewFields.HighLimit.issuer;\n        lowParty = node.NewFields.LowLimit.issuer;\n\n        prevBal = 0;\n        finalBal = parseFloat( node.NewFields.Balance.value );\n        balChange = finalBal - prevBal;\n\n      } else if ( node.PreviousFields && node.PreviousFields.Balance ) {\n\n        // trustline balance modified\n\n        currency = node.FinalFields.Balance.currency;\n        lowParty = node.FinalFields.LowLimit.issuer;\n        highParty = node.FinalFields.HighLimit.issuer;\n\n        prevBal = parseFloat( node.PreviousFields.Balance.value );\n        finalBal = parseFloat( node.FinalFields.Balance.value );\n        balChange = finalBal - prevBal;\n\n      } else {\n\n        return;\n      }\n\n      emit( [ lowParty, currency ].concat( timestamp ), balChange );\n      emit( [ highParty, currency ].concat( timestamp ), ( 0 - balChange ) );\n\n    } );\n  } );\n}",
          "reduce": "_sum"
        }
      }
    },
    {
      "_id": "_design/offersExercised",
      "language": "javascript",
      "validate_doc_update": "function(newDoc, oldDoc, userCtx, secObj) {\n    if (userCtx && userCtx.roles && (userCtx.roles.indexOf('_admin') !== -1 ||\n        userCtx.roles.indexOf('write') !== -1)) {\n        return;\n    } else {\n        throw ({\n            forbidden: 'You do not have write access to this database'\n        });\n    }\n}",
      "views": {
        "v1": {
          "map": "function( doc ) {\n\n  var time = new Date( doc.close_time_timestamp ),\n    timestamp = [ time.getUTCFullYear( ), time.getUTCMonth( ), time.getUTCDate( ),\n      time.getUTCHours( ), time.getUTCMinutes( ), time.getUTCSeconds( )\n    ];\n\n  doc.transactions.forEach( function( tx ) {\n\n    if ( tx.metaData.TransactionResult !== 'tesSUCCESS' ) {\n      return;\n    }\n\n    if ( tx.TransactionType !== 'Payment' && tx.TransactionType !== 'OfferCreate' ) {\n      return;\n    }\n\n    tx.metaData.AffectedNodes.forEach( function( affNode ) {\n\n      var node = affNode.ModifiedNode || affNode.DeletedNode;\n\n      if ( !node || node.LedgerEntryType !== 'Offer' ) {\n        return;\n      }\n\n      if ( !node.PreviousFields || !node.PreviousFields.TakerPays || !node.PreviousFields.TakerGets ) {\n        return;\n      }\n\n      var exchangeRate = node.exchange_rate,\n        payCurr,\n        payAmnt,\n        getCurr,\n        getAmnt;\n\n      if ( typeof node.PreviousFields.TakerPays === \"object\" ) {\n        payCurr = [ node.PreviousFields.TakerPays.currency, node.PreviousFields.TakerPays.issuer ];\n        payAmnt = node.PreviousFields.TakerPays.value - node.FinalFields.TakerPays.value;\n      } else {\n        payCurr = [ \"XRP\" ];\n        payAmnt = ( node.PreviousFields.TakerPays - node.FinalFields.TakerPays ) / 1000000.0; // convert from drops\n        exchangeRate = exchangeRate / 1000000.0;\n      }\n\n      if ( typeof node.PreviousFields.TakerGets === \"object\" ) {\n        getCurr = [ node.PreviousFields.TakerGets.currency, node.PreviousFields.TakerGets.issuer ];\n        getAmnt = node.PreviousFields.TakerGets.value - node.FinalFields.TakerGets.value;\n      } else {\n        getCurr = [ \"XRP\" ];\n        getAmnt = ( node.PreviousFields.TakerGets - node.FinalFields.TakerGets ) / 1000000.0;\n        exchangeRate = exchangeRate * 1000000.0;\n      }\n\n      emit( [ payCurr, getCurr ].concat( timestamp ), [ payAmnt, getAmnt, exchangeRate ] );\n      emit( [ getCurr, payCurr ].concat( timestamp ), [ getAmnt, payAmnt, 1 / exchangeRate ] );\n\n    } );\n  } );\n}",
          "reduce": "function( keys, values, rereduce ) {\n\n  var stats;\n\n  if ( !rereduce ) {\n\n    var firstTime = keys[ 0 ][ 0 ].slice( 2 ),\n      firstPrice;\n\n    if ( values[ 0 ][ 2 ] ) { // exchangeRate\n      firstPrice = parseFloat(values[ 0 ][ 2 ]);\n    } else {\n      firstPrice = values[ 0 ][ 0 ] / values[ 0 ][ 1 ];\n    }\n\n    // initial values\n    stats = {\n      openTime: firstTime,\n      closeTime: firstTime,\n\n      open: firstPrice,\n      close: firstPrice,\n      high: firstPrice,\n      low: firstPrice,\n\n      curr1VwavNumerator: 0,\n      curr1Volume: 0,\n      curr2Volume: 0,\n      numTrades: 0\n    };\n\n    values.forEach( function( trade, index ) {\n\n      var tradeTime = keys[ index ][ 0 ].slice( 2 ),\n        tradeRate = trade[ 2 ] || ( trade[ 0 ] / trade[ 1 ] );\n\n      if ( lessThan( tradeTime, stats.openTime ) ) {\n        stats.openTime = tradeTime;\n        stats.open = tradeRate;\n      }\n\n      if ( lessThan( stats.closeTime, tradeTime ) ) {\n        stats.closeTime = tradeTime;\n        stats.close = tradeRate;\n      }\n\n      stats.high = Math.max( stats.high, tradeRate );\n      stats.low = Math.min( stats.low, tradeRate );\n      stats.curr1VwavNumerator += tradeRate * trade[ 0 ];\n      stats.curr1Volume += trade[ 0 ];\n      stats.curr2Volume += trade[ 1 ];\n      stats.numTrades++;\n\n    } );\n\n    stats.volumeWeightedAvg = stats.curr1VwavNumerator / stats.curr1Volume;\n\n    return stats;\n\n  } else {\n\n    stats = values[0];\n\n    values.forEach( function( segment, index ) {\n\n      // skip values[0]\n      if (index === 0) {\n        return;\n      }\n\n      if ( lessThan( segment.openTime, stats.openTime ) ) {\n        stats.openTime = segment.openTime;\n        stats.open = segment.open;\n      }\n      if ( lessThan( stats.closeTime, segment.closeTime ) ) {\n        stats.closeTime = segment.closeTime;\n        stats.close = segment.close;\n      }\n\n      stats.high = Math.max( stats.high, segment.high );\n      stats.low = Math.min( stats.low, segment.low );\n\n      stats.curr1VwavNumerator += segment.curr1VwavNumerator;\n      stats.curr1Volume += segment.curr1Volume;\n      stats.curr2Volume += segment.curr2Volume;\n      stats.numTrades += segment.numTrades;\n\n    } );\n\n    stats.volumeWeightedAvg = stats.curr1VwavNumerator / stats.curr1Volume;\n\n    return stats;\n  }\n\n\n  function lessThan( arr1, arr2 ) {\n    if ( arr1.length !== arr2.length )\n      return false;\n\n    for ( var i = 0; i < arr1.length; i++ ) {\n      if ( arr1[ i ] < arr2[ i ] ) {\n        return true;\n      } else if ( arr1[ i ] > arr2[ i ] ) {\n        return false;\n      } else {\n        continue;\n      }\n    }\n\n    return false;\n  }\n}"
        }
      }
    },
    {
      "_id": "_design/valueSent",
      "language": "javascript",
      "validate_doc_update": "function(newDoc, oldDoc, userCtx, secObj) {\n    if (userCtx && userCtx.roles && (userCtx.roles.indexOf('_admin') !== -1 ||\n        userCtx.roles.indexOf('write') !== -1)) {\n        return;\n    } else {\n        throw ({\n            forbidden: 'You do not have write access to this database'\n        });\n    }\n}",
      "views": {
        "v1": {
          "map": "// function map (doc) {\nfunction(doc) {\n\n  var time = new Date(doc.close_time_timestamp);\n  var timestamp = [\n    time.getUTCFullYear(), \n    time.getUTCMonth(), \n    time.getUTCDate(),\n    time.getUTCHours(), \n    time.getUTCMinutes(), \n    time.getUTCSeconds()\n  ];\n\n  doc.transactions.forEach(function(tx){\n\n    if (tx.metaData.TransactionResult !== 'tesSUCCESS') {\n      return;\n    }\n\n    if (tx.TransactionType !== 'Payment' && tx.TransactionType !== 'OfferCreate') {\n      return;\n    }\n\n    var src_balance_changes = parseBalanceChanges(tx, tx.Account);\n\n    if (src_balance_changes.length > 0) {\n      src_balance_changes.forEach(function(bal_change){\n        emit([bal_change.currency, bal_change.issuer].concat(timestamp), 0 - parseFloat(bal_change.value));\n      });\n    }\n\n  });\n\n  function parseBalanceChanges (tx, address) {\n\n    var addressBalanceChanges = [];\n\n    tx.metaData.AffectedNodes.forEach(function(affNode){\n\n      var node = affNode.CreatedNode || affNode.ModifiedNode || affNode.DeletedNode;\n\n      // Look for XRP balance change in AccountRoot node\n      if (node.LedgerEntryType === 'AccountRoot') {\n\n        var xrpBalChange = parseAccountRootBalanceChange(node, address);\n        if (xrpBalChange) {\n\n          // Add back the fee back if address is the sender\n          if (address === tx.Account) {\n            xrpBalChange.value += dropsToXrp(tx.Fee);\n          }\n\n          addressBalanceChanges.push(xrpBalChange);\n        }\n\n      }\n\n      // Look for trustline balance change in RippleState node\n      if (node.LedgerEntryType === 'RippleState') {\n\n        var currBalChange = parseTrustlineBalanceChange(node, address);\n        if (currBalChange) {\n          addressBalanceChanges.push(currBalChange);\n        }\n\n      }\n\n    });\n\n    return addressBalanceChanges;\n\n  }\n\n\n  function parseAccountRootBalanceChange (node, address) {\n\n    if (node.NewFields) {\n\n      if (node.NewFields.Account === address) {\n        return {\n          value: dropsToXrp(node.NewFields.Balance),\n          currency: 'XRP',\n          issuer: ''\n        };\n      }\n\n    } else if (node.FinalFields) {\n\n      if (node.FinalFields.Account === address) {\n\n        var finalBal = dropsToXrp(node.FinalFields.Balance),\n          prevBal = dropsToXrp(node.PreviousFields.Balance),\n          balChange = parseFloat(finalBal) - parseFloat(prevBal);\n        \n        return {\n          value: balChange,\n          currency: 'XRP',\n          issuer: ''\n        };\n      }\n    }\n\n    return null;\n  }\n\n  function parseTrustlineBalanceChange (node, address) {\n\n    var balChange = {\n        value: 0,\n        currency: '',\n        issuer: ''\n      }, \n      trustHigh,\n      trustLow,\n      trustBalFinal,\n      trustBalPrev;\n\n    if (node.NewFields) {\n      trustHigh = node.NewFields.HighLimit;\n      trustLow = node.NewFields.LowLimit;\n      trustBalFinal = parseFloat(node.NewFields.Balance.value);\n    } else {\n      trustHigh = node.FinalFields.HighLimit;\n      trustLow = node.FinalFields.LowLimit;\n      trustBalFinal = parseFloat(node.FinalFields.Balance.value); \n    }\n\n    if (node.PreviousFields && node.PreviousFields.Balance) {\n      trustBalPrev = parseFloat(node.PreviousFields.Balance.value);\n    } else {\n      trustBalPrev = 0;\n    }\n\n    // Set value\n    if (trustLow.issuer === address) {\n      balChange.value = parseFloat(trustBalFinal) - parseFloat(trustBalPrev);\n    } else if (trustHigh.issuer === address) {\n      balChange.value = 0 - (parseFloat(trustBalFinal) - parseFloat(trustBalPrev));\n    } else {\n      return null;\n    }\n\n    // Set currency\n    balChange.currency = (node.NewFields || node.FinalFields).Balance.currency;\n\n    // Set issuer\n    if ((parseFloat(trustHigh.value) === 0 && parseFloat(trustLow.value) === 0) ||\n      (parseFloat(trustHigh.value) > 0 && parseFloat(trustLow.value) > 0)) {\n\n      if (parseFloat(trustBalFinal) > 0 || parseFloat(trustBalPrev) > 0) {\n        balChange.issuer = trustLow.issuer;\n      } else {\n        balChange.issuer = trustHigh.issuer;\n      }\n\n    } else if (parseFloat(trustHigh.value) > 0) {\n      balChange.issuer = trustLow.issuer;\n    } else if (parseFloat(trustLow.value) > 0) {\n      balChange.issuer = trustHigh.issuer;\n    }\n\n    return balChange;\n\n  }\n\n  function dropsToXrp (drops) {\n    return parseFloat(drops) / 1000000.0;\n  }\n\n  function xrpToDrops (xrp) {\n    return parseFloat(xrp) * 1000000.0;\n  }\n\n}\n\n// function emit(key, value) {\n//   console.log('key: ' + JSON.stringify(key) + ' value: ' + value);\n// }\n\n// map({\n//       \"accepted\": true,\n//       \"account_hash\": \"ADDDCDB0C57D4F6010713C8A97C09A39EBD9CFF339DD2020B081E87DF3D1FAE0\",\n//       \"close_time\": 444459220,\n//       \"close_time_human\": \"2014-Jan-31 04:53:40\",\n//       \"close_time_resolution\": 10,\n//       \"closed\": true,\n//       \"hash\": \"E02BBDE4A5BB721C72BBF4C2139A0A22637E43A46DEC44B4BF85B8A20F765970\",\n//       \"ledger_hash\": \"E02BBDE4A5BB721C72BBF4C2139A0A22637E43A46DEC44B4BF85B8A20F765970\",\n//       \"ledger_index\": \"4718685\",\n//       \"parent_hash\": \"B3BA5147905C6017354B408D1EF0C9AD0EB3E352BFAB8521B6D392E44E7F1B3D\",\n//       \"seqNum\": \"4718685\",\n//       \"totalCoins\": \"99999998050649525\",\n//       \"total_coins\": \"99999998050649525\",\n//       \"transaction_hash\": \"E7422BEA4FE1789B3EFFEB2293436C371F69F08904EAC7C17C29D64A643A9B29\",\n//       \"transactions\": [\n//         {\n//           \"Account\": \"rU2DL7DwxxEjkRFV6uuSZtmJiosV5YgetS\",\n//           \"Amount\": {\n//             \"currency\": \"BTC\",\n//             \"issuer\": \"rLpq5RcRzA8FU1yUqEPW4xfsdwon7casuM\",\n//             \"value\": \"0.0001\"\n//           },\n//           \"Destination\": \"rLpq5RcRzA8FU1yUqEPW4xfsdwon7casuM\",\n//           \"Fee\": \"15\",\n//           \"Flags\": 0,\n//           \"Paths\": [\n//             [\n//               {\n//                 \"account\": \"rfYv1TXnwgDDK4WQNbFALykYuEBnrR4pDX\",\n//                 \"type\": 1,\n//                 \"type_hex\": \"0000000000000001\"\n//               },\n//               {\n//                 \"account\": \"rsZJQzsexY63t8LdkKhFdkqc29Bh2946Uh\",\n//                 \"type\": 1,\n//                 \"type_hex\": \"0000000000000001\"\n//               },\n//               {\n//                 \"account\": \"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B\",\n//                 \"type\": 1,\n//                 \"type_hex\": \"0000000000000001\"\n//               }\n//             ],\n//             [\n//               {\n//                 \"account\": \"rfYv1TXnwgDDK4WQNbFALykYuEBnrR4pDX\",\n//                 \"type\": 1,\n//                 \"type_hex\": \"0000000000000001\"\n//               },\n//               {\n//                 \"account\": \"r9LqFsCMME6NNSFkb5wmPYaUaf1AzgbKyc\",\n//                 \"type\": 1,\n//                 \"type_hex\": \"0000000000000001\"\n//               },\n//               {\n//                 \"account\": \"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B\",\n//                 \"type\": 1,\n//                 \"type_hex\": \"0000000000000001\"\n//               }\n//             ],\n//             [\n//               {\n//                 \"account\": \"rfYv1TXnwgDDK4WQNbFALykYuEBnrR4pDX\",\n//                 \"type\": 1,\n//                 \"type_hex\": \"0000000000000001\"\n//               },\n//               {\n//                 \"account\": \"rGe5oH9mzzJ5CsfUJhHhraUCrkfY7zEQVV\",\n//                 \"type\": 1,\n//                 \"type_hex\": \"0000000000000001\"\n//               },\n//               {\n//                 \"account\": \"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B\",\n//                 \"type\": 1,\n//                 \"type_hex\": \"0000000000000001\"\n//               }\n//             ],\n//             [\n//               {\n//                 \"account\": \"rfYv1TXnwgDDK4WQNbFALykYuEBnrR4pDX\",\n//                 \"type\": 1,\n//                 \"type_hex\": \"0000000000000001\"\n//               },\n//               {\n//                 \"account\": \"rnziParaNb8nsU4aruQdwYE3j5jUcqjzFm\",\n//                 \"type\": 1,\n//                 \"type_hex\": \"0000000000000001\"\n//               },\n//               {\n//                 \"account\": \"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B\",\n//                 \"type\": 1,\n//                 \"type_hex\": \"0000000000000001\"\n//               }\n//             ]\n//           ],\n//           \"SendMax\": {\n//             \"currency\": \"BTC\",\n//             \"issuer\": \"rU2DL7DwxxEjkRFV6uuSZtmJiosV5YgetS\",\n//             \"value\": \"0.000101353803\"\n//           },\n//           \"Sequence\": 22,\n//           \"SigningPubKey\": \"03B5115CC780BA2EE3F0CA617BA8CC2408BB52A646A0585C236F1BA362F4F8EB89\",\n//           \"TransactionType\": \"Payment\",\n//           \"TxnSignature\": \"304402202D80325969238916D0D873D42684B62DFE8E22264413FC38F26F3512758F8AC202205D5482A0E9E5818250472BE80974083A8C9B093738EB20F3F17AAC7A45942AB8\",\n//           \"hash\": \"0D137EAAD7CC6296B4B330314846E89D484B2C4890936D3FE1969897A31F6D5C\",\n//           \"metaData\": {\n//             \"AffectedNodes\": [\n//               {\n//                 \"ModifiedNode\": {\n//                   \"FinalFields\": {\n//                     \"Balance\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n//                       \"value\": \"-0.000894562910134798\"\n//                     },\n//                     \"Flags\": 131072,\n//                     \"HighLimit\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rsZJQzsexY63t8LdkKhFdkqc29Bh2946Uh\",\n//                       \"value\": \"0.1\"\n//                     },\n//                     \"HighNode\": \"0000000000000000\",\n//                     \"LowLimit\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B\",\n//                       \"value\": \"0\"\n//                     },\n//                     \"LowNode\": \"0000000000000113\"\n//                   },\n//                   \"LedgerEntryType\": \"RippleState\",\n//                   \"LedgerIndex\": \"235866687C354C777919CF68490F86E81CCF96E9F068765B964808DE7B97AEAF\",\n//                   \"PreviousFields\": {\n//                     \"Balance\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n//                       \"value\": \"-0.000994762910134798\"\n//                     }\n//                   },\n//                   \"PreviousTxnID\": \"1CCCFFCB3EBEBDB2F075186858927D4315CB2A93FB601E66FE70ECB07FE5902F\",\n//                   \"PreviousTxnLgrSeq\": 4699097\n//                 }\n//               },\n//               {\n//                 \"ModifiedNode\": {\n//                   \"FinalFields\": {\n//                     \"Balance\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n//                       \"value\": \"0.001141447515872594\"\n//                     },\n//                     \"Flags\": 65536,\n//                     \"HighLimit\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rfYv1TXnwgDDK4WQNbFALykYuEBnrR4pDX\",\n//                       \"value\": \"0\"\n//                     },\n//                     \"HighNode\": \"0000000000000033\",\n//                     \"LowLimit\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rsZJQzsexY63t8LdkKhFdkqc29Bh2946Uh\",\n//                       \"value\": \"0.1\"\n//                     },\n//                     \"LowNode\": \"0000000000000000\"\n//                   },\n//                   \"LedgerEntryType\": \"RippleState\",\n//                   \"LedgerIndex\": \"2FAC03FAF21C97882149BC3D968431F947547E202841E703786E1B1229D904F0\",\n//                   \"PreviousFields\": {\n//                     \"Balance\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n//                       \"value\": \"0.001041247515872594\"\n//                     }\n//                   },\n//                   \"PreviousTxnID\": \"1CCCFFCB3EBEBDB2F075186858927D4315CB2A93FB601E66FE70ECB07FE5902F\",\n//                   \"PreviousTxnLgrSeq\": 4699097\n//                 }\n//               },\n//               {\n//                 \"ModifiedNode\": {\n//                   \"FinalFields\": {\n//                     \"Account\": \"rU2DL7DwxxEjkRFV6uuSZtmJiosV5YgetS\",\n//                     \"Balance\": \"172113760760\",\n//                     \"Flags\": 0,\n//                     \"OwnerCount\": 2,\n//                     \"Sequence\": 23\n//                   },\n//                   \"LedgerEntryType\": \"AccountRoot\",\n//                   \"LedgerIndex\": \"C32FC61866A3744D802E52F6276A4680F82738EB4A9671AD2BFFBDA934E068BE\",\n//                   \"PreviousFields\": {\n//                     \"Balance\": \"172113760775\",\n//                     \"Sequence\": 22\n//                   },\n//                   \"PreviousTxnID\": \"18BDA2A877475840B427F8552E946367E0FBA5CC918E065B5CBFE4ED54752DDF\",\n//                   \"PreviousTxnLgrSeq\": 4707221\n//                 }\n//               },\n//               {\n//                 \"ModifiedNode\": {\n//                   \"FinalFields\": {\n//                     \"Balance\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n//                       \"value\": \"-0.5489575198674392\"\n//                     },\n//                     \"Flags\": 2228224,\n//                     \"HighLimit\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rU2DL7DwxxEjkRFV6uuSZtmJiosV5YgetS\",\n//                       \"value\": \"100\"\n//                     },\n//                     \"HighNode\": \"0000000000000000\",\n//                     \"LowLimit\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rfYv1TXnwgDDK4WQNbFALykYuEBnrR4pDX\",\n//                       \"value\": \"0\"\n//                     },\n//                     \"LowNode\": \"000000000000003B\"\n//                   },\n//                   \"LedgerEntryType\": \"RippleState\",\n//                   \"LedgerIndex\": \"D505A48DABB927A1F2A0E0A4A4393320772BDB14F243FBB38B1F89340E7B5D2E\",\n//                   \"PreviousFields\": {\n//                     \"Balance\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n//                       \"value\": \"-0.5490578701674392\"\n//                     }\n//                   },\n//                   \"PreviousTxnID\": \"1F99E7E9BCFD285793D54F7CB3161745D7C9B615D68EEFA37E3D77044FF6CA2E\",\n//                   \"PreviousTxnLgrSeq\": 4689485\n//                 }\n//               },\n//               {\n//                 \"ModifiedNode\": {\n//                   \"FinalFields\": {\n//                     \"Balance\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n//                       \"value\": \"-0.00112098\"\n//                     },\n//                     \"Flags\": 131072,\n//                     \"HighLimit\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rLpq5RcRzA8FU1yUqEPW4xfsdwon7casuM\",\n//                       \"value\": \"1\"\n//                     },\n//                     \"HighNode\": \"0000000000000000\",\n//                     \"LowLimit\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B\",\n//                       \"value\": \"0\"\n//                     },\n//                     \"LowNode\": \"00000000000000BB\"\n//                   },\n//                   \"LedgerEntryType\": \"RippleState\",\n//                   \"LedgerIndex\": \"DB50D38DF8AA6F652D7BF58229745D8095FFFA9465130D1C1976AAEBB5C2DCDE\",\n//                   \"PreviousFields\": {\n//                     \"Balance\": {\n//                       \"currency\": \"BTC\",\n//                       \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n//                       \"value\": \"-0.00102098\"\n//                     }\n//                   },\n//                   \"PreviousTxnID\": \"72E2970A1CE0CB56A8F11F9E36847E59BA62BEDB7DAD6C0461E36C1E694DFEDC\",\n//                   \"PreviousTxnLgrSeq\": 4699069\n//                 }\n//               }\n//             ],\n//             \"TransactionIndex\": 0,\n//             \"TransactionResult\": \"tesSUCCESS\"\n//           }\n//         },\n//         {\n//           \"Account\": \"rs1KQkwBYW1pY7jGeRiNgBkbD6WkPG4cYE\",\n//           \"Amount\": \"4000000\",\n//           \"Destination\": \"rpyUV8W6XRvss6SBkAS8PyzGwMsSDxgNXW\",\n//           \"DestinationTag\": 2,\n//           \"Fee\": \"12\",\n//           \"Flags\": 0,\n//           \"Sequence\": 9113,\n//           \"SigningPubKey\": \"03441A4ED5967DEB25C52892BA8274EF6E1D7293609C0C4CF7DFF5257230365DDB\",\n//           \"TransactionType\": \"Payment\",\n//           \"TxnSignature\": \"304402207D4F0636474CB5AB61362FAA03AE609F45772FE472E38ACB589DC63BEA779C1C02207058EF9E47C46E51E96703EBAE61E91BB32BC5CD48FF77CAF6CB7980B44295D2\",\n//           \"hash\": \"3F72E3C4C391AD1CE4E436CE68C3D6E16F8BA9FCDE911886D0AA6078BC8D1DF6\",\n//           \"metaData\": {\n//             \"AffectedNodes\": [\n//               {\n//                 \"ModifiedNode\": {\n//                   \"FinalFields\": {\n//                     \"Account\": \"rs1KQkwBYW1pY7jGeRiNgBkbD6WkPG4cYE\",\n//                     \"Balance\": \"2782924305\",\n//                     \"Flags\": 0,\n//                     \"OwnerCount\": 0,\n//                     \"Sequence\": 9114\n//                   },\n//                   \"LedgerEntryType\": \"AccountRoot\",\n//                   \"LedgerIndex\": \"A2A15502645DE43E85253F66C447D05B0A9C9927AA0C544AB0411A123D7FF80A\",\n//                   \"PreviousFields\": {\n//                     \"Balance\": \"2786924317\",\n//                     \"Sequence\": 9113\n//                   },\n//                   \"PreviousTxnID\": \"40AB3BD0DE0A8C952E29B5C45DDA0A18D4EDB27B579ABAF56257D7DC2E93D866\",\n//                   \"PreviousTxnLgrSeq\": 4718675\n//                 }\n//               },\n//               {\n//                 \"ModifiedNode\": {\n//                   \"FinalFields\": {\n//                     \"Account\": \"rpyUV8W6XRvss6SBkAS8PyzGwMsSDxgNXW\",\n//                     \"Balance\": \"1478454471599\",\n//                     \"Flags\": 0,\n//                     \"OwnerCount\": 0,\n//                     \"Sequence\": 228555\n//                   },\n//                   \"LedgerEntryType\": \"AccountRoot\",\n//                   \"LedgerIndex\": \"C754412E25ED3F4257524CED149B993DC1683BDEBE6E0514604008A9B259813B\",\n//                   \"PreviousFields\": {\n//                     \"Balance\": \"1478450471599\"\n//                   },\n//                   \"PreviousTxnID\": \"40AB3BD0DE0A8C952E29B5C45DDA0A18D4EDB27B579ABAF56257D7DC2E93D866\",\n//                   \"PreviousTxnLgrSeq\": 4718675\n//                 }\n//               }\n//             ],\n//             \"TransactionIndex\": 1,\n//             \"TransactionResult\": \"tesSUCCESS\"\n//           }\n//         },\n//         {\n//           \"Account\": \"ra7JkEzrgeKHdzKgo4EUUVBnxggY4z37kt\",\n//           \"Amount\": {\n//             \"currency\": \"USD\",\n//             \"issuer\": \"rMwjYedjc7qqtKYVLiAccJSmCwih4LnE2q\",\n//             \"value\": \"100\"\n//           },\n//           \"Destination\": \"rfUW4KCKvzdA4MCgoft1u5ojuQbpSFRktB\",\n//           \"Fee\": \"10\",\n//           \"Flags\": 0,\n//           \"SendMax\": {\n//             \"currency\": \"USD\",\n//             \"issuer\": \"rMwjYedjc7qqtKYVLiAccJSmCwih4LnE2q\",\n//             \"value\": \"100.00001\"\n//           },\n//           \"Sequence\": 123651,\n//           \"SigningPubKey\": \"02808D78A818D7B27FC43D27A5E793E354A72204E0ACD59A88BB13743FF0F14625\",\n//           \"SourceTag\": 926415956,\n//           \"TransactionType\": \"Payment\",\n//           \"TxnSignature\": \"3046022100EECB7E3083B924EF79F2366A50E8E5E22323E16515C502B47278AABB2E6E79260221008A1D05120284992C63FA75BFE1FB11F8823DD2238FE9DB6DF20185D133F8CA92\",\n//           \"hash\": \"80575096E403379AD2F37A4006FF59A69E9AFD0DF4CA70AC9C4CEE08B1AB5F09\",\n//           \"metaData\": {\n//             \"AffectedNodes\": [\n//               {\n//                 \"ModifiedNode\": {\n//                   \"FinalFields\": {\n//                     \"Account\": \"ra7JkEzrgeKHdzKgo4EUUVBnxggY4z37kt\",\n//                     \"Balance\": \"98863451\",\n//                     \"Flags\": 917504,\n//                     \"OwnerCount\": 1,\n//                     \"Sequence\": 123652\n//                   },\n//                   \"LedgerEntryType\": \"AccountRoot\",\n//                   \"LedgerIndex\": \"D72C5D772234B929C5025423FE111846E4F20EF92269368D4D264A12982FDFE4\",\n//                   \"PreviousFields\": {\n//                     \"Balance\": \"98863461\",\n//                     \"Sequence\": 123651\n//                   },\n//                   \"PreviousTxnID\": \"CC277E6C1063C20D1BA1C922C4081320CD316A330019DE7B479D569C9D5404A0\",\n//                   \"PreviousTxnLgrSeq\": 4718677\n//                 }\n//               }\n//             ],\n//             \"TransactionIndex\": 2,\n//             \"TransactionResult\": \"tecPATH_PARTIAL\"\n//           }\n//         }\n//       ]\n//     });",
          "reduce": "function(keys, values) {\n  var sum = 0;\n  values.forEach(function(val, index){\n    var to_add = parseFloat(val);\n    if (typeof to_add === 'number') {\n      sum += to_add;\n    }\n  });\n  return sum;\n}"
        }
      }
    }
  ]
}